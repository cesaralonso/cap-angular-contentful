!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common/http"),require("rxjs"),require("rxjs/operators"),require("@angular/common")):"function"==typeof define&&define.amd?define("cap-angular-contentful",["exports","@angular/core","@angular/common/http","rxjs","rxjs/operators","@angular/common"],t):t((e=e||self)["cap-angular-contentful"]={},e.ng.core,e.ng.common.http,e.rxjs,e.rxjs.operators,e.ng.common)}(this,(function(e,t,n,r,o,i){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function s(e,t,n,r){var o,i=arguments.length,c=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(c=(i<3?o(c):i>3?o(t,n,c):o(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c}function a(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)c.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return c}var u=function(){function e(e){e&&(this.accessToken=e.accessToken,this.space=e.space,this.environment=e.environment)}var n,r;return e.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Optional}]}]},e=s([t.Injectable(),(n=0,r=t.Optional(),function(e,t){r(e,t,n)})],e)}(),p=function(){function e(e,t){this._http=e,this.configService=t,this.httpOptions={headers:new n.HttpHeaders({Authorization:"Bearer "+this.configService.accessToken,"Content-Type":"application/vnd.contentful.delivery.v1+json"}),observe:"response"},this.actionUrl="https://cdn.contentful.com/spaces/"+this.configService.space+"/environments/"+this.configService.environment+"/"}return e.prototype.responseWithRelatedAssets=function(e,t){if(!e.includes||!e.includes.Asset||!e.items)return e;var n=e.includes.Asset,r=e.items,o=[];return r.map((function(e){t.map((function(t){var r=n.filter((function(n){return n.sys.id===e.fields[t].sys.id}))[0].fields,i=r;(r=r.file).title=i.title||"",r.description=i.description||"",e.fields[t]=c({},e.fields[t],{file:r}),o=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e}(o,[e])}))})),e.items=o,e.items},e.prototype.getItems=function(e,t){var n=this,r=this.actionUrl+"entries?content_type="+e;return this._http.get(r,this.httpOptions).pipe(o.map((function(e){return e.body})),o.tap((function(e){return t?n.responseWithRelatedAssets(e,t):e})),o.catchError((function(e){return n.handleError(e)})))},e.prototype.getItemById=function(e,t,n){var r=this,i=this.actionUrl+"entries?content_type="+e+"&fields.id="+t;return this._http.get(i,this.httpOptions).pipe(o.map((function(e){return e.body})),o.tap((function(e){return n?r.responseWithRelatedAssets(e,n):e})),o.catchError((function(e){return r.handleError(e)})))},e.prototype.handleError=function(e){return console.error(e),r.throwError(e||"Server error")},e.ctorParameters=function(){return[{type:n.HttpClient},{type:u}]},e.ngInjectableDef=t["ɵɵdefineInjectable"]({factory:function(){return new e(t["ɵɵinject"](n.HttpClient),t["ɵɵinject"](u))},token:e,providedIn:"root"}),e=s([t.Injectable({providedIn:"root"})],e)}(),f=function(){function e(){}var r;return r=e,e.forRoot=function(e){return{ngModule:r,providers:[{provide:u,useValue:e}]}},e=r=s([t.NgModule({declarations:[],imports:[n.HttpClientModule,i.CommonModule],exports:[],providers:[p],schemas:[]})],e)}();e.CapContentfulModule=f,e.CapContentfulService=p,e.ConfigService=u,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=cap-angular-contentful.umd.min.js.map