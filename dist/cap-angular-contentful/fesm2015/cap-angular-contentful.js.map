{"version":3,"file":"cap-angular-contentful.js","sources":["ng://cap-angular-contentful/lib/services/config.service.ts","ng://cap-angular-contentful/lib/contentful.module.ts","ng://cap-angular-contentful/lib/services/contentful.service.ts","ng://cap-angular-contentful/public-api.ts","ng://cap-angular-contentful/cap-angular-contentful.ts"],"sourcesContent":["import { Injectable, Inject } from '@angular/core';\nimport { ConfigInterface } from '../interfaces/config.interface';\n\n@Injectable()\nexport class ConfigService {\n  space_id: string = '';\n  environmet: string = '';\n  delivery_accessToken: string = '';\n\n  constructor(@Inject(Object) private data: ConfigInterface) {\n    if (data) {\n      this.space_id = this.data.space_id;\n      this.environmet = this.data.environmet;\n      this.delivery_accessToken = this.data.delivery_accessToken;\n\n    }\n  }\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { HttpClientModule } from '@angular/common/http';\nimport { ConfigService } from './services/config.service';\nimport { ConfigInterface } from './interfaces/config.interface';\nimport { CommonModule } from \"@angular/common\";\n\n@NgModule({\n  declarations: [\n  ],\n  imports: [\n    HttpClientModule,\n    CommonModule,\n  ],\n  exports: [\n  ],\n  providers: [\n    ConfigService\n  ],\n  schemas: [\n  ]\n})\nexport class CapContentfulModule {\n  static forRoot(config: ConfigInterface): ModuleWithProviders {\n    return {\n      ngModule: CapContentfulModule,\n      providers: [\n        {\n          provide: ConfigService,\n          useValue: config\n        },\n      ]\n    };\n  }\n}\n\n","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Observable, throwError } from 'rxjs';\nimport { map, catchError, tap } from 'rxjs/operators';\nimport { ConfigService } from './config.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CapContentfulService {\n\n  private baseUrl: string;\n  private httpOptions: any;\n\n  constructor(\n    private _http: HttpClient,\n    private credentials: ConfigService) {\n    this.httpOptions = {\n      headers: new HttpHeaders({\n        'Authorization': `Bearer ${credentials.delivery_accessToken}`,\n        'Content-Type': 'application/vnd.contentful.delivery.v1+json'\n      }),\n      observe: \"response\"\n    };\n    this.baseUrl = `https://cdn.contentful.com/spaces/${this.credentials.space_id}/environments/${this.credentials.environmet}/`;\n  }\n\n\n  /**\n * Return the items related with a specific content type\n * @param contentType String\n * @param limit Optional(Number)\n * @param skip Optional(Number)\n*/\n  getItems(contentType: string, limit?: number, skip?: number): Observable<any> {\n    limit ? limit = limit : limit = 100;\n\n    const _url = `${this.baseUrl}entries?content_type=${contentType}&limit=${limit}&skip=${skip}`;\n    return this._http.get<any>(_url, this.httpOptions)\n      .pipe(\n        map((response: any) => response.body),\n        tap((response: any) => {\n\n          return response;\n        }),\n        catchError(error => this.handleError(error))\n      );\n  }\n\n  /**\n * Return a specific item by Id\n * @param entryId String\n*/\n  getItemById(entryId: string): Observable<any> {\n    let _url = `${this.baseUrl}entries/${entryId}`\n\n    return this._http.get<any>(_url, this.httpOptions)\n      .pipe(\n        map((response: any) => response.body),\n        tap((response: any) => response),\n        catchError(error => this.handleError(error))\n      );\n  }\n\n  private handleError(error: any) {\n    console.error(error);\n    return throwError(error || 'Server error');\n  }\n\n  /**\n * Return a list of items related with a specific content type\n * @param contentType String\n * @param limit Optional(Number)\n * @param skip Optional(Number)\n*/\n  getElementsByContentType(contentType: string, limit?: number, skip?: number) {\n    limit ? limit = limit : limit = 100;\n    let _url = `${this.baseUrl}entries?content_type=${contentType}&limit=${limit}&skip=${skip}`\n    return this._http.get<any>(_url, this.httpOptions)\n      .pipe(\n        map((response: any) => response.body),\n        tap((response: any) => response),\n        catchError(error => this.handleError(error))\n      );\n  }\n\n  /**\n * Return an item related with a specific assetId\n * @param assetId String\n*/\n  getAsset(assetId: string) {\n    let _url = `${this.baseUrl}assets/${assetId}`;\n\n    return this._http.get<any>(_url, this.httpOptions)\n      .pipe(\n        map((response: any) => response.body),\n        catchError(error => this.handleError(error))\n      );\n  }\n}\n","/*\n * Public API Surface of cap-contentful\n */\nexport * from './lib/contentful.module';\nexport * from './lib/services/contentful.service';\nexport * from './lib/services/config.service';\nexport * from './lib/interfaces/config.interface';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}